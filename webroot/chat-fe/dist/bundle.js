!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);t(2),t(1)},function(e,n){var t=0,o=1,r=new WebSocket("ws://ws.heiwawa.xyz/ws"),c=1e4,i=3e3,u="",a=!1,l={nickName:"",action:1,id:Math.floor(1e3*Math.random())};function s(){let e=new Date;if(a)if(u&&e-u<=i)alert("请不要过于频繁的发送消息");else{u=e;var n=document.getElementById("message");n.value.length<=0||(!function(e){var n={content:e,nickName:l.nickName,user:l.id,action:2};1===r.readyState&&d(n)}(n.value),n.value="",n.focus())}else alert("尚未链接到聊天室，刷新页面以重新连接！")}function d(e){r.send(JSON.stringify(e))}r.onopen=function(){l.nickName=prompt("请输入你的昵称").trim(),l.nickName=l.nickName.replace(/柳|后|羿|liu|hou|yi|lhy/g,function(e){return"*"}),r.send(JSON.stringify(l))},r.onclose=function(){console.log("ws链接关闭了"),a=!1,document.getElementById("send_btn").value="已关闭链接"},r.onerror=function(){console.log("ws链接出现错误"),r.close()},r.onmessage=function(e){var n=JSON.parse(e.data);switch(n.action){case t:a=!0,function(){if(!a)return void alert("尚未链接到聊天室，刷新页面以重新连接！");var e={action:4};setInterval(function(){d(e)},c)}(),document.getElementById("send_btn").value="发送";break;case o:!function(e){var n=document.getElementById("messageBox"),t=document.createElement("li"),o="yg "===e.content.substr(0,3);o&&(e.content=e.content.substr(3));var r=(e.nickName?e.nickName:e.user)+":"+e.content;o?t.innerHTML=r:t.innerText=r;n.appendChild(t),n.scrollTop=n.scrollHeight}(n)}},document.onkeydown=function(e){13==(window.event?e.keyCode:e.which)&&document.getElementById("message").value.length>0&&s()},document.getElementById("send_btn").addEventListener("click",s)},function(e,n){}]);